---
title: Linux 压缩文件时排除指定文件/目录
categories:
  - Ops
tags:
  - Linux
date: 2022-08-11 15:39:32
index_img:
---

<!-- more -->
<!-- categories:Dev、Ops、Study、Sth、News-->
<!-- tags: 
Python、MySQL、LeetCode、机器学习、Linux、Big Data、Java、BlockChain、Docker、Web 、分布式、
Maven、数据结构、JVM、JavaScript、Crontab、Shell、Ubuntu、VPN、NodeJS、String、VM、Hadoop、
Life、树莓派、Git、Hexo
 -->
场景：Hexo定期手动备份，需要将本地的源文件去除模块文件后压缩打包出来，由于模块文件比较大，会增加打包时间，所以需要在打包时剔除。使用tar 的--exclude 参数就能实现

例子：打包blog文件夹，需要去除blog/node_modules/目录：

```bash
tar -zcvf blog.tar.gz --exclude=blog/node_modules blog
```



排除多个目录的话在第一个--exclude后面追加即可，如：

```bash
tar -zcvf blog.tar.gz --exclude=blog/node_modules --exclude=blog/public blog
```



注意：

--exclude排除目录时，**不能在目录后面加 `/`** ，否则这个命令就失效了，还是会被打包进去

如下，这个是错误写法，因为node_modules后面多个一个`/`：

```
tar -zcvf blog.tar.gz --exclude=blog/node_modules/ blog
```


