---
title: mysql5.7修改密码最佳实践
categories:
  - Dev
tags:
  - 运维
abbrlink: 5ffe9ce3
date: 2022-12-31 15:53:24
index_img:
---

<!-- more -->
<!-- categories:Dev、Ops、Study、Sth、News、work-->
<!-- tags: 
Python、MySQL、LeetCode、机器学习、Linux、Big Data、Java、BlockChain、Docker、Web 、分布式、
Maven、数据结构、JVM、JavaScript、Crontab、Shell、Ubuntu、VPN、NodeJS、String、VM、Hadoop、
Life、树莓派、Git、Hexo、算法、运维、网络、看法、电影、美学、写作、哲学、文档、绘画、前端、
历史、政治、社会、导购
 -->
环境信息

```
ubuntu@VM-0-7-ubuntu:~/blog$ lsb_release -a
No LSB modules are available.
Description:    Ubuntu 18.04.4 LTS

ubuntu@VM-0-7-ubuntu:~/blog$ mysql --version
mysql  Ver 14.14 Distrib 5.7.38, for Linux (x86_64) using  EditLine wrapper
```

### 修改配置文件

在[mysqld]块内加上`skip-grant-tables`，然后保存退出，`sudo service mysql restart`重启mysql

```
sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf

[mysqld]
#
# * Basic Settings
#
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
lc-messages-dir = /usr/share/mysql
skip-external-locking
skip-grant-tables
```



### 重设密码

终端输入`mysql -u root`直接进入mysql，执行如下语句

```
use mysql;
update user set authentication_string=password("新密码") where user="root";
flush privileges;
```

然后`quit`退出mysql



### 还原配置文件

重新回到刚才的配置文件，将加进去的`skip-grant-tables`注释掉即可。
